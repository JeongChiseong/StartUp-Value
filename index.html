<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤íƒ€íŠ¸ì—… ë°¸ë¥˜ì—ì´ì…˜ ê³„ì‚°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .input-box {
            @apply border-2 border-gray-200 rounded-xl p-4 bg-white shadow-sm transition-all duration-200 hover:border-blue-300 focus-within:border-blue-500 focus-within:ring-4 focus-within:ring-blue-100;
        }
        .result-card {
            @apply bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl p-6 shadow-lg;
        }
        .metric-box {
            @apply bg-white bg-opacity-20 rounded-lg p-4 backdrop-blur-sm;
        }
        body {
            font-weight: 600;
        }
        input, select {
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-gray-500 min-h-screen">
    <!-- í—¤ë” -->
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-4xl mx-auto px-6 py-6">
            <h1 class="text-3xl font-bold text-gray-800 text-center">ğŸ§® ìŠ¤íƒ€íŠ¸ì—… ë°¸ë¥˜ì—ì´ì…˜ ê³„ì‚°ê¸°</h1>
            <p class="text-gray-600 text-center mt-2">ê°„ë‹¨í•œ ì…ë ¥ìœ¼ë¡œ ì •í™•í•œ ê¸°ì—…ê°€ì¹˜ ì‚°ì •</p>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-6 py-8">
        <div class="grid md:grid-cols-2 gap-8">
            <!-- ì…ë ¥ ì„¹ì…˜ -->
            <div class="space-y-6">
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ“‹ ê¸°ë³¸ ì •ë³´</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">íšŒì‚¬ëª…</label>
                            <input type="text" id="companyName" value="ì‚¬ì´ëŸ¬ìŠ¤ë°”ì´í¬" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì—…ì¢…</label>
                            <select id="industry" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="HaaS">HaaS (í•˜ë“œì›¨ì–´ ì„œë¹„ìŠ¤)</option>
                                <option value="SaaS">SaaS (ì†Œí”„íŠ¸ì›¨ì–´)</option>
                                <option value="E-commerce">E-commerce</option>
                                <option value="í•€í…Œí¬">í•€í…Œí¬</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- ë§¤ì¶œ ì •ë³´ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ’° ë§¤ì¶œ ì •ë³´ (ì˜¬í•´ ì‹¤ì , ë§Œì›)</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">í•˜ë“œì›¨ì–´ ë§¤ì¶œ</label>
                                <input type="text" id="hardwareSales" placeholder="3,630" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì¥ë¹„ íŒë§¤/ë³´ì¦ê¸ˆ</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">êµ¬ë… ë§¤ì¶œ</label>
                                <input type="text" id="subscriptionSales" placeholder="37,926" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì›” êµ¬ë…ë£Œ Ã— 12ê°œì›”</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <span class="text-sm font-medium">ì´ ì—°ë§¤ì¶œ: </span>
                            <span id="totalRevenue" class="text-lg font-bold text-blue-600">0ë§Œì›</span>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì „ë…„ë„ ë§¤ì¶œ</label>
                                <input type="text" id="previousRevenue" placeholder="25,000" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì‘ë…„ ë™ê¸° ì´ë§¤ì¶œ</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ìˆœì´ìµ</label>
                                <input type="text" id="netIncome" placeholder="15,000" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì˜¬í•´ ìˆœì´ìµ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íˆ¬ì ì •ë³´ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ¯ íˆ¬ì ì •ë³´</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">íˆ¬ì ìœ ì¹˜ ëª©í‘œ</label>
                            <input type="text" id="investment" value="4,0000" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                   oninput="formatNumber(this); calculate()">
                            <span class="text-xs text-gray-500">ë‹¨ìœ„: ë§Œì› (ì˜ˆ: 40,000 = 4ì–µì›)</span>
                        </div>
                        <div class="text-xs text-gray-400 bg-gray-50 p-3 rounded">
                            ğŸ’¡ ê³ ê° ìˆ˜ëŠ” ë§¤ì¶œ ë°ì´í„°ì—ì„œ ìë™ìœ¼ë¡œ ê³„ì‚°ì— ë°˜ì˜ë©ë‹ˆë‹¤
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <div class="space-y-6">
                <!-- ë©”ì¸ ê²°ê³¼ -->
                <div class="result-card">
                    <h2 class="text-xl font-bold mb-6 text-center">ğŸ“Š ë°¸ë¥˜ì—ì´ì…˜ ê²°ê³¼</h2>
                    <div class="space-y-4">
                        <div class="metric-box">
                            <div class="text-sm opacity-90">ê¸°ì—…ê°€ì¹˜ (Pre-money)</div>
                            <div class="text-2xl font-bold"><span id="valuation">0</span>ì–µì›</div>
                        </div>
                        <div class="metric-box">
                            <div class="text-sm opacity-90">íˆ¬ì í›„ ê°€ì¹˜</div>
                            <div class="text-2xl font-bold"><span id="postMoney">0</span>ì–µì›</div>
                        </div>
                        <div class="metric-box">
                            <div class="text-sm opacity-90">ì·¨ë“ ì§€ë¶„ìœ¨</div>
                            <div class="text-2xl font-bold"><span id="equity">0</span>%</div>
                        </div>
                    </div>
                </div>

                <!-- ìƒì„¸ ë¶„ì„ -->
                <div class="bg-white rounded-xl p-6 shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ ìƒì„¸ ë¶„ì„</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">ë§¤ì¶œ ì„±ì¥ë¥ </span>
                            <span id="growthRate" class="font-semibold">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">êµ¬ë… ë§¤ì¶œ ë¹„ì¤‘</span>
                            <span id="subscriptionRatio" class="font-semibold">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">PSR ë°°ìˆ˜</span>
                            <span id="psrMultiple" class="font-semibold">0ë°°</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ì£¼ë‹¹ ê°€ì¹˜</span>
                            <span id="sharePrice" class="font-semibold">0ì›</span>
                        </div>
                    </div>
                </div>

                <!-- íˆ¬ì ì¡°ê±´ -->
                <div class="bg-green-50 rounded-xl p-6 border border-green-200">
                    <h3 class="text-lg font-semibold mb-4 text-green-800">ğŸ’¼ íˆ¬ì ì¡°ê±´</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-green-700">íˆ¬ìê¸ˆì•¡</span>
                            <span id="investAmount" class="font-semibold text-green-800">4ì–µì›</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-green-700">ì·¨ë“ì§€ë¶„</span>
                            <span id="finalEquity" class="font-semibold text-green-800">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-green-700">ì „í™˜ê°€ê²©</span>
                            <span id="conversionPrice" class="font-semibold text-green-800">0ì›</span>
                        </div>
                    </div>
                </div>

                <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
                <button onclick="downloadReport()" 
                        class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl">
                    ğŸ“¥ ê²°ê³¼ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
    </div>

    <script>
        function formatNumber(input) {
            let value = input.value.replace(/,/g, '');
            if (!isNaN(value) && value !== '') {
                input.value = parseInt(value).toLocaleString();
            }
        }

        function getValue(id) { 
            const value = document.getElementById(id).value.replace(/,/g, '');
            return parseFloat(value) || 0; 
        }
        function setText(id, value) { document.getElementById(id).textContent = value; }
        function format(num) { return (num / 10000).toFixed(1); }

        function calculate() {
            const hardware = getValue('hardwareSales');
            const subscription = getValue('subscriptionSales');
            const previous = getValue('previousRevenue');
            const netIncome = getValue('netIncome');
            const investment = getValue('investment');
            
            const total = hardware + subscription;
            const growth = previous ? ((total - previous) / previous * 100) : 0;
            const subRatio = total ? (subscription / total * 100) : 0;
            
            // PSR ë°°ìˆ˜ ê³„ì‚° (ê°„ì†Œí™”)
            let multiplier = 5;
            if (subRatio > 70) multiplier += 3;
            else if (subRatio > 50) multiplier += 2;
            if (growth > 50) multiplier += 2;
            else if (growth > 30) multiplier += 1;
            multiplier = Math.max(multiplier, 3);
            
            const valuation = total * multiplier;
            const postMoney = valuation + investment;
            const equity = (investment / postMoney * 100);
            
            // ê²°ê³¼ í‘œì‹œ (ì²œì› ë‹¨ìœ„ ì½¤ë§ˆ í¬í•¨)
            setText('totalRevenue', total.toLocaleString() + 'ë§Œì›');
            setText('valuation', format(valuation));
            setText('postMoney', format(postMoney));
            setText('equity', equity.toFixed(1));
            setText('growthRate', growth.toFixed(1) + '%');
            setText('subscriptionRatio', subRatio.toFixed(1) + '%');
            setText('psrMultiple', multiplier.toFixed(1) + 'ë°°');
            setText('sharePrice', (valuation / 4).toFixed(0) + 'ì›');
            setText('investAmount', format(investment) + 'ì–µì›');
            setText('finalEquity', equity.toFixed(1) + '%');
            setText('conversionPrice', (investment * 10000 / (equity * 4)).toFixed(0) + 'ì›');
        }

        function downloadReport() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 800; canvas.height = 600;
            
            // ë°°ê²½
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#667eea'); gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient; ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ì œëª©
            const company = document.getElementById('companyName').value || 'ìŠ¤íƒ€íŠ¸ì—…';
            ctx.fillStyle = 'white'; ctx.font = 'bold 32px Arial'; ctx.textAlign = 'center';
            ctx.fillText(`${company} ë°¸ë¥˜ì—ì´ì…˜ ë¶„ì„`, canvas.width/2, 60);
            
            // ë‚ ì§œ
            ctx.font = '16px Arial'; ctx.fillStyle = 'rgba(255,255,255,0.9)';
            ctx.fillText(`ë¶„ì„ì¼: ${new Date().toLocaleDateString('ko-KR')}`, canvas.width/2, 90);
            
            // ë©”ì¸ ì§€í‘œ
            const metrics = [
                ['ê¸°ì—…ê°€ì¹˜', document.getElementById('valuation').textContent + 'ì–µì›', 150],
                ['íˆ¬ì í›„ ê°€ì¹˜', document.getElementById('postMoney').textContent + 'ì–µì›', 220],
                ['ì·¨ë“ ì§€ë¶„ìœ¨', document.getElementById('equity').textContent + '%', 290],
                ['ë§¤ì¶œ ì„±ì¥ë¥ ', document.getElementById('growthRate').textContent, 360]
            ];
            
            ctx.fillStyle = 'rgba(255,255,255,0.2)'; 
            metrics.forEach(([label, value, y]) => {
                ctx.fillRect(50, y-20, 700, 50);
                ctx.fillStyle = 'white'; ctx.font = 'bold 18px Arial'; ctx.textAlign = 'left';
                ctx.fillText(label, 70, y); ctx.font = 'bold 24px Arial';
                ctx.fillText(value, 400, y); ctx.fillStyle = 'rgba(255,255,255,0.2)';
            });
            
            // ë‹¤ìš´ë¡œë“œ
            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url; a.download = `${company}_ë°¸ë¥˜ì—ì´ì…˜_${new Date().toISOString().slice(0,10)}.png`;
                a.click(); URL.revokeObjectURL(url);
            });
        }

        // ì´ˆê¸° ê³„ì‚°
        calculate();
    </script>
</body>
</html>
