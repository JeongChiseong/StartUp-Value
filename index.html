<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤íƒ€íŠ¸ì—… ë°¸ë¥˜ì—ì´ì…˜ ê³„ì‚°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .input-box {
            @apply border-2 border-gray-200 rounded-xl p-4 bg-white shadow-sm transition-all duration-200 hover:border-blue-300 focus-within:border-blue-500 focus-within:ring-4 focus-within:ring-blue-100;
        }
        .result-card {
            @apply bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl p-6 shadow-lg;
        }
        .metric-box {
            @apply bg-white bg-opacity-20 rounded-lg p-4 backdrop-blur-sm;
        }
        body {
            font-weight: 600;
        }
        input, select {
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-gray-500 min-h-screen">
    <!-- í—¤ë” -->
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-4xl mx-auto px-6 py-6">
            <h1 class="text-3xl font-bold text-gray-800 text-center">ğŸ§® ìŠ¤íƒ€íŠ¸ì—… ë°¸ë¥˜ì—ì´ì…˜ ê³„ì‚°ê¸°</h1>
            <p class="text-gray-600 text-center mt-2">ê°„ë‹¨í•œ ì…ë ¥ìœ¼ë¡œ ì •í™•í•œ ê¸°ì—…ê°€ì¹˜ ì‚°ì •</p>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-6 py-8">
        <!-- ê¸°ì¡´ ë°¸ë¥˜ì—ì´ì…˜ ê³„ì‚°ê¸° -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <!-- ì…ë ¥ ì„¹ì…˜ -->
            <div class="space-y-6">
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ“‹ ê¸°ë³¸ ì •ë³´</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">íšŒì‚¬ëª…</label>
                            <input type="text" id="companyName" value="ì‚¬ì´ëŸ¬ìŠ¤ë°”ì´í¬" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì—…ì¢…</label>
                            <select id="industry" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="HaaS">HaaS (í•˜ë“œì›¨ì–´ ì„œë¹„ìŠ¤) - ì¥ë¹„ ì„ëŒ€+êµ¬ë… ëª¨ë¸</option>
                                <option value="SaaS">SaaS - ì†Œí”„íŠ¸ì›¨ì–´ ì„œë¹„ìŠ¤</option>
                                <option value="E-commerce">E-commerce - ì „ììƒê±°ë˜ í”Œë«í¼</option>
                                <option value="í•€í…Œí¬">í•€í…Œí¬ - ê¸ˆìœµê¸°ìˆ  ì„œë¹„ìŠ¤</option>
                                <option value="í—¬ìŠ¤í…Œí¬">í—¬ìŠ¤í…Œí¬ - ì˜ë£Œ/ê±´ê°• ê¸°ìˆ </option>
                                <option value="IoT/í•˜ë“œì›¨ì–´">IoT/í•˜ë“œì›¨ì–´ - ì‚¬ë¬¼ì¸í„°ë„· ë° í•˜ë“œì›¨ì–´ ì œì¡°</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- ë§¤ì¶œ ì •ë³´ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ’° ë§¤ì¶œ ì •ë³´ (ì²œì›)</h2>
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-3 rounded-lg mb-4">
                            <span class="text-sm font-medium text-blue-700">ğŸ’¡ íŒ: ì˜¬í•´ ì‹¤ì ì´ ìš°ì„ ì´ì§€ë§Œ, ì „ë…„ë„ ë°ì´í„°ë§Œ ìˆì–´ë„ ê³„ì‚° ê°€ëŠ¥í•©ë‹ˆë‹¤</span>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì˜¬í•´ í•˜ë“œì›¨ì–´ ë§¤ì¶œ</label>
                                <input type="text" id="hardwareSales" placeholder="36,300" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì¥ë¹„ íŒë§¤/ë³´ì¦ê¸ˆ (ì˜¬í•´)</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì˜¬í•´ êµ¬ë… ë§¤ì¶œ</label>
                                <input type="text" id="subscriptionSales" placeholder="379,260" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì›” êµ¬ë…ë£Œ Ã— 12ê°œì›” (ì˜¬í•´)</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <span class="text-sm font-medium">ì£¼ìš” ë§¤ì¶œ: </span>
                            <span id="totalRevenue" class="text-lg font-bold text-blue-600">0ì²œì›</span>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì „ë…„ë„ ì´ë§¤ì¶œ</label>
                                <input type="text" id="previousRevenue" placeholder="250,000" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì‘ë…„ ì „ì²´ ë§¤ì¶œ (ì„±ì¥ë¥  ê³„ì‚°ìš©)</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì „ë…„ë„ ìˆœì´ìµ</label>
                                <input type="text" id="previousNetIncome" placeholder="25,000" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì‘ë…„ ìˆœì´ìµ (ìˆ˜ìµì„± ê°œì„  ê³„ì‚°ìš©)</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì˜¬í•´ ìˆœì´ìµ (ì˜ˆìƒ)</label>
                                <input type="text" id="netIncome" placeholder="150,000" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì˜¬í•´ ìµœì¢… ìˆœì´ìµ</span>
                            </div>
                            <div class="bg-green-50 p-3 rounded-lg flex items-center">
                                <span class="text-sm text-green-700">ğŸ’¡ ìˆ˜ìµì„± ê°œì„ ë„: <span id="profitabilityImprovement" class="font-bold">0%p</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íˆ¬ì ì •ë³´ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ¯ íˆ¬ì ì •ë³´</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">íˆ¬ì ìœ ì¹˜ ëª©í‘œ</label>
                            <input type="text" id="investment" value="400,000" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                   oninput="formatNumber(this); calculate()">
                            <span class="text-xs text-gray-500">ë‹¨ìœ„: ì²œì› (ì˜ˆ: 400,000 = 4ì–µì›)</span>
                        </div>
                    </div>
                </div>

                <!-- ê³ ê° ì§€í‘œ -->
                <div class="input-box">
                    <h2 class="text-lg font-semibold mb-4 text-gray-800">ğŸ‘¥ ê³ ê° ì§€í‘œ</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-3 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì „ë…„ë„ ê³ ê°ìˆ˜</label>
                                <input type="text" id="previousCustomers" placeholder="30" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì‘ë…„ ë§ ê¸°ì¤€</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì˜¬í•´ ì‹ ê·œ ê³ ê°</label>
                                <input type="text" id="newCustomers" placeholder="20" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">ì˜¬í•´ ì¶”ê°€</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">í˜„ì¬ ì´ ê³ ê°ìˆ˜</label>
                                <input type="text" id="totalCustomers" placeholder="50" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                       oninput="formatNumber(this); calculate()">
                                <span class="text-xs text-gray-500">í˜„ì¬ ê³„ì•½ ì¤‘</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì „ìš© ì•± MAU (ì›”í™œì„±ìœ ì €)</label>
                            <input type="text" id="mau" placeholder="500" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" 
                                   oninput="formatNumber(this); calculate()">
                            <span class="text-xs text-gray-500">ì›”í‰ê·  ì•± ì‚¬ìš©ì ìˆ˜ (ëª…)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <div class="space-y-6">
                <!-- ë©”ì¸ ê²°ê³¼ -->
                <div class="result-card">
                    <h2 class="text-xl font-bold mb-6 text-center">ğŸ“Š ë°¸ë¥˜ì—ì´ì…˜ ê²°ê³¼</h2>
                    <div class="space-y-4">
                        <div class="metric-box">
                            <div class="text-sm opacity-90">ê¸°ì—…ê°€ì¹˜ (Pre-money)</div>
                            <div class="text-2xl font-bold"><span id="valuation">0</span>ì–µì›</div>
                        </div>
                        <div class="metric-box">
                            <div class="text-sm opacity-90">íˆ¬ì í›„ ê°€ì¹˜</div>
                            <div class="text-2xl font-bold"><span id="postMoney">0</span>ì–µì›</div>
                        </div>
                        <div class="metric-box">
                            <div class="text-sm opacity-90">ì·¨ë“ ì§€ë¶„ìœ¨</div>
                            <div class="text-2xl font-bold"><span id="equity">0</span>%</div>
                        </div>
                    </div>
                </div>

                <!-- ìƒì„¸ ë¶„ì„ -->
                <div class="bg-white rounded-xl p-6 shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ ìƒì„¸ ë¶„ì„</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">ì—…ì¢… ê¸°ë³¸ ë°°ìˆ˜</span>
                            <span id="industryMultiple" class="font-semibold">8.0ë°°</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ë§¤ì¶œ ì„±ì¥ë¥ </span>
                            <span id="growthRate" class="font-semibold">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ê³ ê° ì„±ì¥ë¥ </span>
                            <span id="customerGrowthRate" class="font-semibold">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">êµ¬ë… ë§¤ì¶œ ë¹„ì¤‘</span>
                            <span id="subscriptionRatio" class="font-semibold">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ìµœì¢… PSR ë°°ìˆ˜</span>
                            <span id="psrMultiple" class="font-semibold">0ë°°</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ê³ ê°ë‹¹ ì—°ë§¤ì¶œ</span>
                            <span id="revenuePerCustomer" class="font-semibold">0ë§Œì›</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ì£¼ë‹¹ ê°€ì¹˜</span>
                            <span id="sharePrice" class="font-semibold">0ì›</span>
                        </div>
                    </div>
                </div>

                <!-- íˆ¬ì ì¡°ê±´ -->
                <div class="bg-green-50 rounded-xl p-6 border border-green-200">
                    <h3 class="text-lg font-semibold text-green-800 mb-4">ğŸ’¼ íˆ¬ì ì¡°ê±´</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-green-700">íˆ¬ìê¸ˆì•¡:</span>
                            <span id="investAmount" class="font-semibold text-green-800">4ì–µì›</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-green-700">ì·¨ë“ì§€ë¶„:</span>
                            <span id="finalEquity" class="font-semibold text-green-800">0%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-green-700">ì£¼ë‹¹ê°€ì¹˜:</span>
                            <span id="shareValue" class="font-semibold text-green-800">0ì›</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-green-700">ì „í™˜ê°€ê²©:</span>
                            <span id="conversionPrice" class="font-semibold text-green-800">0ì›</span>
                        </div>
                    </div>
                </div>

                <!-- ë°¸ë¥˜ì—ì´ì…˜ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ -->
                <button onclick="downloadReport()" 
                        class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl">
                    ğŸ“¥ ë°¸ë¥˜ì—ì´ì…˜ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>

        <!-- CB ì‹œë®¬ë ˆì´ì…˜ ì„¹ì…˜ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mt-8">
            <div class="border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-3">
                    ğŸ“Š CB(ì „í™˜ì‚¬ì±„) ì‹œë®¬ë ˆì´ì…˜
                    <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">Convertible Bond</span>
                </h2>
                <p class="text-gray-600 mt-2">ìœ„ì—ì„œ ê³„ì‚°ëœ ê¸°ì—…ê°€ì¹˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì „í™˜ì‚¬ì±„ íˆ¬ì ì¡°ê±´ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.</p>
            </div>

            <!-- CB ê°œë… ì„¤ëª… -->
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                <h3 class="font-semibold text-blue-800 mb-2">ğŸ’¡ CB(ì „í™˜ì‚¬ì±„)ë€?</h3>
                <p class="text-blue-700 text-sm mb-2">
                    <strong>ì „í™˜ì‚¬ì±„(Convertible Bond)</strong>ëŠ” ì²˜ìŒì—ëŠ” ì±„ê¶Œì´ì§€ë§Œ, ë‚˜ì¤‘ì— íˆ¬ììê°€ ì›í•  ë•Œ ì£¼ì‹ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆëŠ” íˆ¬ììƒí’ˆì…ë‹ˆë‹¤.
                </p>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div>
                        <strong class="text-blue-800">âœ… íˆ¬ìì ì¥ì :</strong>
                        <ul class="text-blue-700 mt-1 ml-4">
                            <li>â€¢ ì‹¤íŒ¨ì‹œ: ì›ê¸ˆ + ì´ì ë³´ì¥</li>
                            <li>â€¢ ì„±ê³µì‹œ: ì£¼ì‹ ì „í™˜ìœ¼ë¡œ ìˆ˜ìµ ì°¸ì—¬</li>
                            <li>â€¢ ë¦¬í”½ì‹±: ì£¼ê°€ í•˜ë½ì‹œ ì¡°ê±´ ê°œì„ </li>
                        </ul>
                    </div>
                    <div>
                        <strong class="text-blue-800">âœ… íšŒì‚¬ ì¥ì :</strong>
                        <ul class="text-blue-700 mt-1 ml-4">
                            <li>â€¢ ë‚®ì€ ì´ììœ¨ë¡œ ìê¸ˆ ì¡°ë‹¬</li>
                            <li>â€¢ ë‹¹ì¥ ì§€ë¶„ í¬ì„ ì—†ìŒ</li>
                            <li>â€¢ ì„±ì¥ í›„ ì£¼ì‹ ì „í™˜</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- CB ì¡°ê±´ ì„¤ì • -->
                <div class="space-y-6">
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold text-purple-800 mb-4">ğŸ”§ CB ì¡°ê±´ ì„¤ì •</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì „í™˜ê°€ê²© (ì›/ì£¼)</label>
                                <input type="text" id="cbConversionPrice" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" 
                                       oninput="formatNumber(this); calculateCB()">
                                <span class="text-xs text-gray-500">ì£¼ì‹ìœ¼ë¡œ ë°”ê¿€ ë•Œì˜ ì£¼ë‹¹ ê°€ê²© (ìë™ê³„ì‚°ë¨)</span>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ë§Œê¸°</label>
                                    <select id="maturity" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="calculateCB()">
                                        <option value="3">3ë…„</option>
                                        <option value="5">5ë…„</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ì—°ì´ììœ¨ (%)</label>
                                    <input type="range" id="interestRate" min="1" max="6" step="0.5" value="3" 
                                           class="w-full" oninput="updateInterestDisplay(); calculateCB()">
                                    <span class="text-xs text-gray-500">í˜„ì¬: <span id="interestDisplay">3.0</span>%</span>
                                </div>
                            </div>

                            <div class="border-t pt-4">
                                <h4 class="font-medium text-gray-800 mb-2">ğŸ”„ ë¦¬í”½ì‹± ì¡°ê±´</h4>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ë°œë™ ê¸°ì¤€</label>
                                        <select id="repricing" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="calculateCB()">
                                            <option value="70">ì „í™˜ê°€ì˜ 70%</option>
                                            <option value="80">ì „í™˜ê°€ì˜ 80%</option>
                                            <option value="90">ì „í™˜ê°€ì˜ 90%</option>
                                        </select>
                                        <span class="text-xs text-gray-500">ì£¼ê°€ê°€ ì´ ìˆ˜ì¤€ ì´í•˜ë¡œ ë–¨ì–´ì§€ë©´ ì „í™˜ê°€ ì¡°ì •</span>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ê°•ì œì „í™˜</label>
                                        <select id="forceConversion" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="calculateCB()">
                                            <option value="150">ì£¼ê°€ 150% ë„ë‹¬ì‹œ</option>
                                            <option value="200">ì£¼ê°€ 200% ë„ë‹¬ì‹œ</option>
                                            <option value="0">ì—†ìŒ</option>
                                        </select>
                                        <span class="text-xs text-gray-500">ì£¼ê°€ ìƒìŠ¹ì‹œ ìë™ ì „í™˜</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CB ê³„ì‚° ê²°ê³¼ -->
                <div class="space-y-6">
                    <!-- ì „í™˜ ì¡°ê±´ ìš”ì•½ -->
                    <div class="bg-indigo-600 text-white p-6 rounded-lg">
                        <h3 class="text-lg font-bold mb-4">ğŸ’° ì „í™˜ ì¡°ê±´ ìš”ì•½</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>ì „í™˜ê°€ê²©</span>
                                <span id="cbConversionPriceDisplay" class="font-bold">0ì›/ì£¼</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ì „í™˜ì‹œ ì·¨ë“ì£¼ì‹</span>
                                <span id="cbShares" class="font-bold">0ì£¼</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ì·¨ë“ ì§€ë¶„ìœ¨</span>
                                <span id="cbEquityRatio" class="font-bold">0%</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ë¦¬í”½ì‹± í•˜í•œ</span>
                                <span id="cbRepricingFloor" class="font-bold">0ì›</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ë§Œê¸°ê¹Œì§€ ì´ì´ì</span>
                                <span id="cbTotalInterest" class="font-bold">0ë§Œì›</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„ -->
                    <div class="bg-white border rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">ğŸ“ˆ Exit ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="p-2 text-left">ì‹œë‚˜ë¦¬ì˜¤</th>
                                        <th class="p-2 text-right">ê¸°ì—…ê°€ì¹˜</th>
                                        <th class="p-2 text-right">íˆ¬ìì ìˆ˜ìµ</th>
                                        <th class="p-2 text-right">ì—°ë³µë¦¬ IRR</th>
                                    </tr>
                                </thead>
                                <tbody id="scenarioTable">
                                    <!-- ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„°ê°€ ì—¬ê¸°ì— ì‚½ì…ë©ë‹ˆë‹¤ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´ì…˜ -->
            <div class="mt-8 bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">âš¡ ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´ì…˜</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Exitì‹œ ê¸°ì—…ê°€ì¹˜ ë°°ìˆ˜: <span id="exitMultiple">1.0</span>ë°°
                        </label>
                        <input type="range" id="exitMultiplier" min="0.5" max="5" step="0.1" value="1.0" 
                               class="w-full" oninput="updateExitSimulation()">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>0.5ë°° (ì‹¤íŒ¨)</span>
                            <span>1.0ë°° (í˜„ì¬)</span>
                            <span>5.0ë°° (ëŒ€ì„±ê³µ)</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 mt-4">
                        <div class="bg-white p-4 rounded border">
                            <div class="text-sm text-gray-600">Exit ê¸°ì—…ê°€ì¹˜</div>
                            <div id="exitValuation" class="text-lg font-bold text-blue-600">0ì–µì›</div>
                        </div>
                        <div class="bg-white p-4 rounded border">
                            <div class="text-sm text-gray-600">íˆ¬ìì ìˆ˜ìµ</div>
                            <div id="investorReturn" class="text-lg font-bold text-green-600">0ì–µì›</div>
                        </div>
                        <div class="bg-white p-4 rounded border">
                            <div class="text-sm text-gray-600">ì´ ìˆ˜ìµë¥ </div>
                            <div id="totalReturn" class="text-lg font-bold text-purple-600">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CB vs ì¼ë°˜íˆ¬ì ë¹„êµ -->
            <div class="mt-6 bg-green-50 border border-green-200 rounded-lg p-4">
                <h4 class="font-semibold text-green-800 mb-3">ğŸ”„ CB vs ì¼ë°˜ ì§€ë¶„íˆ¬ì ë¹„êµ</h4>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div>
                        <strong class="text-green-700">CB íˆ¬ì:</strong>
                        <ul class="text-green-600 mt-1 ml-4">
                            <li>â€¢ Downside ë³´í˜¸: ì›ê¸ˆ + ì´ì ë³´ì¥</li>
                            <li>â€¢ Upside ì°¸ì—¬: ì„±ê³µì‹œ ì£¼ì‹ ì „í™˜</li>
                            <li>â€¢ ë¦¬í”½ì‹±: ì£¼ê°€ í•˜ë½ ë³´í˜¸</li>
                        </ul>
                    </div>
                    <div>
                        <strong class="text-green-700">ì¼ë°˜ ì§€ë¶„íˆ¬ì:</strong>
                        <ul class="text-green-600 mt-1 ml-4">
                            <li>â€¢ ë†’ì€ ìœ„í—˜: ì‹¤íŒ¨ì‹œ ì „ì•¡ ì†ì‹¤</li>
                            <li>â€¢ ë” ë§ì€ ì§€ë¶„: ê°™ì€ ê¸ˆì•¡ìœ¼ë¡œ ë” ë§ì€ ì§€ë¶„ ì·¨ë“</li>
                            <li>â€¢ ì¦‰ì‹œ ì§€ë¶„ ë³´ìœ </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentValuation = 0;
        let currentInvestment = 0;
        let currentSharePrice = 0;

        // ìˆ«ì í¬ë§·íŒ… í•¨ìˆ˜
        function formatNumber(input) {
            let value = input.value.replace(/[^\d]/g, '');
            if (value) {
                input.value = Number(value).toLocaleString();
            }
        }

        // ë¬¸ìì—´ì—ì„œ ìˆ«ì ì¶”ì¶œ
        function parseNumber(str) {
            if (!str) return 0;
            return parseInt(str.replace(/[^\d]/g, '')) || 0;
        }

        // ì—…ì¢…ë³„ ë°°ìˆ˜ ë°˜í™˜
        function getIndustryMultiple(industry) {
            const multiples = {
                'HaaS': 8.0,
                'SaaS': 12.0,
                'E-commerce': 6.0,
                'í•€í…Œí¬': 10.0,
                'í—¬ìŠ¤í…Œí¬': 15.0,
                'IoT/í•˜ë“œì›¨ì–´': 5.0
            };
            return multiples[industry] || 8.0;
        }

        // ë©”ì¸ ê³„ì‚° í•¨ìˆ˜
        function calculate() {
            // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const hardwareSales = parseNumber(document.getElementById('hardwareSales').value);
            const subscriptionSales = parseNumber(document.getElementById('subscriptionSales').value);
            const previousRevenue = parseNumber(document.getElementById('previousRevenue').value);
            const previousNetIncome = parseNumber(document.getElementById('previousNetIncome').value);
            const netIncome = parseNumber(document.getElementById('netIncome').value);
            const investment = parseNumber(document.getElementById('investment').value);
            const previousCustomers = parseNumber(document.getElementById('previousCustomers').value);
            const newCustomers = parseNumber(document.getElementById('newCustomers').value);
            const totalCustomers = parseNumber(document.getElementById('totalCustomers').value);
            const mau = parseNumber(document.getElementById('mau').value);
            const industry = document.getElementById('industry').value;

            // ê¸°ë³¸ ê³„ì‚°
            const totalRevenue = hardwareSales + subscriptionSales;
            const baseMultiple = getIndustryMultiple(industry);
            
            // ì„±ì¥ë¥  ê³„ì‚°
            let growthRate = 0;
            if (previousRevenue > 0) {
                growthRate = ((totalRevenue - previousRevenue) / previousRevenue) * 100;
            }

            // ê³ ê° ì„±ì¥ë¥  ê³„ì‚°
            let customerGrowthRate = 0;
            if (previousCustomers > 0) {
                customerGrowthRate = ((totalCustomers - previousCustomers) / previousCustomers) * 100;
            }

            // êµ¬ë… ë§¤ì¶œ ë¹„ì¤‘
            const subscriptionRatio = totalRevenue > 0 ? (subscriptionSales / totalRevenue) * 100 : 0;

            // ìˆ˜ìµì„± ê°œì„ ë„
            let profitabilityImprovement = 0;
            if (previousRevenue > 0 && totalRevenue > 0) {
                const previousMargin = (previousNetIncome / previousRevenue) * 100;
                const currentMargin = (netIncome / totalRevenue) * 100;
                profitabilityImprovement = currentMargin - previousMargin;
            }

            // ê³ ê°ë‹¹ ì—°ë§¤ì¶œ
            const revenuePerCustomer = totalCustomers > 0 ? totalRevenue / totalCustomers : 0;

            // PSR ë°°ìˆ˜ ì¡°ì •
            let adjustedMultiple = baseMultiple;
            
            // ì„±ì¥ë¥  ë³´ì • (ì—° 50% ì´ìƒ ê³ ì„±ì¥ì‹œ +20%, ìŒì„±ì¥ì‹œ -30%)
            if (growthRate >= 50) adjustedMultiple *= 1.2;
            else if (growthRate < 0) adjustedMultiple *= 0.7;
            
            // êµ¬ë… ë¹„ì¤‘ ë³´ì • (80% ì´ìƒì‹œ +15%)
            if (subscriptionRatio >= 80) adjustedMultiple *= 1.15;
            
            // ìˆ˜ìµì„± ê°œì„  ë³´ì • (10%p ì´ìƒ ê°œì„ ì‹œ +10%)
            if (profitabilityImprovement >= 10) adjustedMultiple *= 1.1;
            
            // ê³ ê° ì„±ì¥ë¥  ë³´ì • (50% ì´ìƒì‹œ +10%)
            if (customerGrowthRate >= 50) adjustedMultiple *= 1.1;

            // ë°¸ë¥˜ì—ì´ì…˜ ê³„ì‚° (ì²œì› ë‹¨ìœ„)
            currentValuation = totalRevenue * adjustedMultiple;
            const postMoneyValuation = currentValuation + investment;
            const equityPercentage = investment > 0 ? (investment / postMoneyValuation) * 100 : 0;

            // ì£¼ë‹¹ ê°€ì¹˜ ê³„ì‚° (ë°œí–‰ ì£¼ì‹ ìˆ˜ë¥¼ 100ë§Œì£¼ë¡œ ê°€ì •)
            const totalShares = 1000000;
            currentSharePrice = currentValuation * 1000 / totalShares; // ì› ë‹¨ìœ„

            // ì „ì—­ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
            currentInvestment = investment;

            // ê²°ê³¼ ì—…ë°ì´íŠ¸
            document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString() + 'ì²œì›';
            document.getElementById('valuation').textContent = (currentValuation / 100000).toFixed(1);
            document.getElementById('postMoney').textContent = (postMoneyValuation / 100000).toFixed(1);
            document.getElementById('equity').textContent = equityPercentage.toFixed(1);

            // ìƒì„¸ ë¶„ì„ ì—…ë°ì´íŠ¸
            document.getElementById('industryMultiple').textContent = baseMultiple.toFixed(1) + 'ë°°';
            document.getElementById('growthRate').textContent = growthRate.toFixed(1) + '%';
            document.getElementById('customerGrowthRate').textContent = customerGrowthRate.toFixed(1) + '%';
            document.getElementById('subscriptionRatio').textContent = subscriptionRatio.toFixed(1) + '%';
            document.getElementById('psrMultiple').textContent = adjustedMultiple.toFixed(1) + 'ë°°';
            document.getElementById('revenuePerCustomer').textContent = (revenuePerCustomer / 10).toFixed(0) + 'ë§Œì›';
            document.getElementById('sharePrice').textContent = currentSharePrice.toLocaleString() + 'ì›';
            document.getElementById('profitabilityImprovement').textContent = profitabilityImprovement.toFixed(1) + '%p';

            // íˆ¬ì ì¡°ê±´ ì—…ë°ì´íŠ¸
            document.getElementById('investAmount').textContent = (investment / 100000).toFixed(1) + 'ì–µì›';
            document.getElementById('finalEquity').textContent = equityPercentage.toFixed(1) + '%';
            document.getElementById('shareValue').textContent = currentSharePrice.toLocaleString() + 'ì›';
            document.getElementById('conversionPrice').textContent = currentSharePrice.toLocaleString() + 'ì›';

            // CB ê³„ì‚° íŠ¸ë¦¬ê±°
            calculateCB();
        }

        // CB ê³„ì‚° í•¨ìˆ˜
        function calculateCB() {
            if (currentValuation === 0) return;

            const conversionPrice = currentSharePrice * 1.2; // 20% í”„ë¦¬ë¯¸ì—„
            const maturity = parseInt(document.getElementById('maturity').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const repricingThreshold = parseInt(document.getElementById('repricing').value);
            const forceConversionThreshold = parseInt(document.getElementById('forceConversion').value);

            // CB ì „í™˜ê°€ê²© ìë™ ì„¤ì •
            document.getElementById('cbConversionPrice').value = Math.round(conversionPrice).toLocaleString();

            // ì „í™˜ ì¡°ê±´ ê³„ì‚°
            const cbShares = Math.floor(currentInvestment * 1000 / conversionPrice);
            const totalShares = 1000000;
            const cbEquityRatio = (cbShares / (totalShares + cbShares)) * 100;
            const repricingFloor = conversionPrice * (repricingThreshold / 100);
            const totalInterest = (currentInvestment * interestRate * maturity / 100) / 100; // ë§Œì› ë‹¨ìœ„

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('cbConversionPriceDisplay').textContent = Math.round(conversionPrice).toLocaleString() + 'ì›/ì£¼';
            document.getElementById('cbShares').textContent = cbShares.toLocaleString() + 'ì£¼';
            document.getElementById('cbEquityRatio').textContent = cbEquityRatio.toFixed(1) + '%';
            document.getElementById('cbRepricingFloor').textContent = Math.round(repricingFloor).toLocaleString() + 'ì›';
            document.getElementById('cbTotalInterest').textContent = totalInterest.toFixed(0) + 'ë§Œì›';

            // ì‹œë‚˜ë¦¬ì˜¤ í…Œì´ë¸” ìƒì„±
            generateScenarioTable(conversionPrice, maturity, interestRate);
        }

        // ì‹œë‚˜ë¦¬ì˜¤ í…Œì´ë¸” ìƒì„±
        function generateScenarioTable(conversionPrice, maturity, interestRate) {
            const scenarios = [
                { name: 'ì‹¤íŒ¨ (0.5ë°°)', multiplier: 0.5, class: 'text-red-600' },
                { name: 'ë³´í†µ (1.0ë°°)', multiplier: 1.0, class: 'text-gray-700' },
                { name: 'ì„±ê³µ (2.0ë°°)', multiplier: 2.0, class: 'text-green-600' },
                { name: 'ëŒ€ì„±ê³µ (5.0ë°°)', multiplier: 5.0, class: 'text-blue-600' }
            ];

            let tableHTML = '';
            scenarios.forEach(scenario => {
                const exitValuation = currentValuation * scenario.multiplier;
                const sharePrice = exitValuation * 1000 / 1000000;
                
                let investorReturn, irr;
                if (sharePrice >= conversionPrice) {
                    // ì£¼ì‹ ì „í™˜
                    const shares = Math.floor(currentInvestment * 1000 / conversionPrice);
                    investorReturn = (shares * sharePrice) / 1000;
                    irr = (Math.pow(investorReturn / (currentInvestment / 100), 1/maturity) - 1) * 100;
                } else {
                    // ì±„ê¶Œ ìƒí™˜
                    investorReturn = currentInvestment / 100 + (currentInvestment * interestRate * maturity / 100 / 100);
                    irr = interestRate;
                }

                const returnRate = ((investorReturn - currentInvestment/100) / (currentInvestment/100)) * 100;

                tableHTML += `
                    <tr class="${scenario.class}">
                        <td class="p-2 font-medium">${scenario.name}</td>
                        <td class="p-2 text-right">${(exitValuation/100000).toFixed(1)}ì–µì›</td>
                        <td class="p-2 text-right">${investorReturn.toFixed(1)}ì–µì›</td>
                        <td class="p-2 text-right">${irr.toFixed(1)}%</td>
                    </tr>
                `;
            });

            document.getElementById('scenarioTable').innerHTML = tableHTML;
        }

        // ì´ììœ¨ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateInterestDisplay() {
            const rate = document.getElementById('interestRate').value;
            document.getElementById('interestDisplay').textContent = parseFloat(rate).toFixed(1);
        }

        // Exit ì‹œë®¬ë ˆì´ì…˜ ì—…ë°ì´íŠ¸
        function updateExitSimulation() {
            const multiplier = parseFloat(document.getElementById('exitMultiplier').value);
            document.getElementById('exitMultiple').textContent = multiplier.toFixed(1);

            const exitValuation = currentValuation * multiplier;
            const conversionPrice = currentSharePrice * 1.2;
            const sharePrice = exitValuation * 1000 / 1000000;

            let investorReturn;
            if (sharePrice >= conversionPrice) {
                const shares = Math.floor(currentInvestment * 1000 / conversionPrice);
                investorReturn = (shares * sharePrice) / 1000;
            } else {
                const interestRate = parseFloat(document.getElementById('interestRate').value);
                const maturity = parseInt(document.getElementById('maturity').value);
                investorReturn = currentInvestment / 100 + (currentInvestment * interestRate * maturity / 100 / 100);
            }

            const returnRate = ((investorReturn - currentInvestment/100) / (currentInvestment/100)) * 100;

            document.getElementById('exitValuation').textContent = (exitValuation/100000).toFixed(1) + 'ì–µì›';
            document.getElementById('investorReturn').textContent = investorReturn.toFixed(1) + 'ì–µì›';
            document.getElementById('totalReturn').textContent = returnRate.toFixed(1) + '%';
        }

        // ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        function downloadReport() {
            const companyName = document.getElementById('companyName').value;
            const valuation = (currentValuation / 100000).toFixed(1);
            const investment = (currentInvestment / 100000).toFixed(1);
            
            const reportContent = `
${companyName} ë°¸ë¥˜ì—ì´ì…˜ ë¦¬í¬íŠ¸
=====================================

ğŸ“Š ê¸°ì—…ê°€ì¹˜ í‰ê°€ ê²°ê³¼
â€¢ ê¸°ì—…ê°€ì¹˜ (Pre-money): ${valuation}ì–µì›
â€¢ íˆ¬ìê¸ˆì•¡: ${investment}ì–µì›
â€¢ íˆ¬ì í›„ ê°€ì¹˜: ${((currentValuation + currentInvestment) / 100000).toFixed(1)}ì–µì›

ğŸ“ˆ ì£¼ìš” ì§€í‘œ
â€¢ ì—…ì¢…: ${document.getElementById('industry').value}
â€¢ ì´ ë§¤ì¶œ: ${document.getElementById('totalRevenue').textContent}
â€¢ ì£¼ë‹¹ ê°€ì¹˜: ${document.getElementById('sharePrice').textContent}

ğŸ’¼ íˆ¬ì ì¡°ê±´
â€¢ ì·¨ë“ ì§€ë¶„ìœ¨: ${document.getElementById('equity').textContent}
â€¢ ì „í™˜ê°€ê²©: ${document.getElementById('conversionPrice').textContent}

ì‘ì„±ì¼: ${new Date().toLocaleDateString('ko-KR')}
`;

            const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${companyName}_ë°¸ë¥˜ì—ì´ì…˜_ë¦¬í¬íŠ¸.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ì´ˆê¸° ê³„ì‚° ì‹¤í–‰
        window.onload = function() {
            calculate();
        };
    </script>
</body>
</html>
